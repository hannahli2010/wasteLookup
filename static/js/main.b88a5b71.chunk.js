(window.webpackJsonp=window.webpackJsonp||[]).push([[0],{197:function(e,t,a){e.exports=a(342)},202:function(e,t,a){},204:function(e,t,a){},342:function(e,t,a){"use strict";a.r(t);var n=a(1),l=a.n(n),r=a(15),o=a.n(r),c=(a(202),a(71)),i=a(30),s=a(113),d=a(114),h=a(117),u=a(115),f=a(118),m=(a(204),a(16)),w=l.a.createElement("svg",{xmlns:"http://www.w3.org/2000/svg",width:"24",height:"24",viewBox:"0 0 24 24",fill:"#23995c"},l.a.createElement("path",{d:"M12 17.27L18.18 21l-1.64-7.03L22 9.24l-7.19-.61L12 2 9.19 8.63 2 9.24l5.46 4.73L5.82 21z"})),v=l.a.createElement("svg",{xmlns:"http://www.w3.org/2000/svg",width:"24",height:"24",viewBox:"0 0 24 24",fill:"gray"},l.a.createElement("path",{d:"M12 17.27L18.18 21l-1.64-7.03L22 9.24l-7.19-.61L12 2 9.19 8.63 2 9.24l5.46 4.73L5.82 21z"})),g=l.a.createElement("svg",{xmlns:"http://www.w3.org/2000/svg",width:"24",height:"24",viewBox:"0 0 24 24",fill:"white"},l.a.createElement("path",{d:"M15.5 14h-.79l-.28-.27C15.41 12.59 16 11.11 16 9.5 16 5.91 13.09 3 9.5 3S3 5.91 3 9.5 5.91 16 9.5 16c1.61 0 3.09-.59 4.23-1.57l.27.28v.79l5 4.99L20.49 19l-4.99-5zm-6 0C7.01 14 5 11.99 5 9.5S7.01 5 9.5 5 14 7.01 14 9.5 11.99 14 9.5 14z"})),p=function(e){function t(){var e,a;Object(s.a)(this,t);for(var n=arguments.length,l=new Array(n),r=0;r<n;r++)l[r]=arguments[r];return(a=Object(h.a)(this,(e=Object(u.a)(t)).call.apply(e,[this].concat(l)))).state={data:"",filter:"",display:"",rows:null},a.handleChange=function(e){a.setState({filter:e.target.value.toUpperCase(),rows:""===e.target.value?null:a.state.rows})},a.handleEnter=function(e){"Enter"===e.key&&a.handleSearch()},a.handleSearch=function(){a.setState({display:a.state.filter,rows:""===a.state.filter?null:a.state.data&&a.state.data.filter(function(e){return e.keywords.toUpperCase().search(a.state.filter)>=0})})},a}return Object(f.a)(t,e),Object(d.a)(t,[{key:"componentDidMount",value:function(){var e=this;fetch("https://secure.toronto.ca/cc_sr_v1/data/swm_waste_wizard_APR?limit=1000").then(function(e){return e.json()}).then(function(t){e.setState({data:t.map(function(e){return e.fav=!1,e})})},function(t){console.log(t),e.setState({data:"error"})})}},{key:"shouldComponentUpdate",value:function(e,t){return this.state.rows!==t.rows}},{key:"handleFavourite",value:function(e,t){var a=this;console.log(t);var n=this.state,l=n.data,r=n.rows,o=l.findIndex(function(t){return t.title===e.title}),s=r?r.findIndex(function(t){return t.title===e.title}):-1;this.setState(function(t){return{data:o>=0?[].concat(Object(i.a)(t.data.slice(0,o)),[Object(c.a)({},l[o],{fav:!e.fav})],Object(i.a)(t.data.slice(o+1))):a.state.data,rows:s>=0?[].concat(Object(i.a)(t.rows.slice(0,s)),[Object(c.a)({},r[s],{fav:!e.fav})],Object(i.a)(t.rows.slice(s+1))):a.state.rows}})}},{key:"htmlDecode",value:function(e){var t=document.createElement("div");return t.innerHTML=e,0===t.childNodes.length?"":t.childNodes[0].nodeValue}},{key:"renderRows",value:function(e){var t=this;return console.log("call"),e.map(function(e,a){return l.a.createElement(m.f,{className:"Table_Row",key:a},l.a.createElement(m.e,null,l.a.createElement(m.b,{onClick:function(a){t.handleFavourite(e,a)}},e.fav?w:v)),l.a.createElement(m.e,{style:{width:"30%"}},e.title),l.a.createElement(m.e,{style:{width:"60%"}},l.a.createElement("div",{dangerouslySetInnerHTML:{__html:t.htmlDecode(e.body)}})))})}},{key:"render",value:function(){var e=this.state.data&&this.state.data.filter(function(e){return!0===e.fav});return l.a.createElement("div",{className:"App"},l.a.createElement("header",{className:"App-header"},l.a.createElement("p",null,"Toronto Waste Lookup")),l.a.createElement("div",{style:{margin:30,flexDirection:"column"}},l.a.createElement("div",{className:"Row"},l.a.createElement(m.g,{style:{width:"50%"},variant:"outlined",type:"text",onChange:this.handleChange,onKeyPress:this.handleEnter}),l.a.createElement(m.a,{style:{marginLeft:20,height:50,backgroundColor:"#23995c"},variant:"contained",onClick:this.handleSearch},g)),l.a.createElement(m.c,null,l.a.createElement(m.d,null,this.state.rows&&this.renderRows(this.state.rows))),l.a.createElement("div",{style:{height:20}}),e.length>0?l.a.createElement("div",{style:{backgroundColor:"#f7fefa",color:"#23995c"}},l.a.createElement("b",{style:{float:"left",marginLeft:10,fontSize:25}},"Favourites"),l.a.createElement(m.c,{style:{color:"black"}},l.a.createElement(m.d,null,this.renderRows(e)))):null))}}]),t}(n.Component);Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));o.a.render(l.a.createElement(p,null),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then(function(e){e.unregister()})}},[[197,2,1]]]);
//# sourceMappingURL=main.b88a5b71.chunk.js.map